<nav class="navbar navbar-expand-lg navbar-custom fixed-top">
  <div class="container">
    <a class="navbar-brand navbar-brand-custom" href="#">
      <i class="bi bi-piggy-bank-fill me-2"></i>Your Money 2.0
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link nav-link-custom" href="/dashboard">
            <i class="bi bi-house-door me-1"></i>Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-link-custom" href="/receitas">
            <i class="bi bi-arrow-up-circle me-1"></i>Receitas
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-link-custom" href="/despesas">
            <i class="bi bi-arrow-down-circle me-1"></i>Despesas
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-link-custom active" href="/investimento">
            <i class="bi bi-graph-up-arrow me-1"></i>Investimentos
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link nav-link-custom" href="/metas">
            <i class="bi bi-bullseye me-1"></i>Metas
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Conteúdo Principal -->
<div class="main-container">
  <div class="container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#" style="color: var(--blue);">Início</a></li>
        <li class="breadcrumb-item active" aria-current="page">Investimentos</li>
      </ol>
    </nav>

    <!-- Grid Principal -->
    <div class="investimentos-grid">
      <!-- Ponto Focal: Construção do Futuro -->
      <div class="focal-point">
        <div class="card card-custom card-focal fade-in-up future-highlight">
          <div class="card-body total-investimentos">
            <h3 class="mb-3">Construção do Futuro - {{ mesAtual | date:'MMMM yyyy' : 'pt' }}</h3>
            <div class="total-valor valor-investimento">R$ {{ totalInvestimentos | number:'1.2-2' }}</div>
            <div class="total-status">Total de investimentos este mês</div>

            <!-- Calendário -->
            <div class="d-flex justify-content-between align-items-center mb-4">
              <button class="btn btn-outline-secondary btn-sm" (click)="mudarMes(-1)">
                <i class="bi bi-chevron-left"></i>
              </button>
              <button type="button" class="btn btn-link p-0 text-decoration-none" (click)="abrirCalendario()"
                style="color: var(--escuro-sofisticado);">
                <i class="bi bi-calendar3" style="font-size: 0.95rem; color: var(--blue);"></i>
              </button>
              <button class="btn btn-outline-secondary btn-sm" (click)="mudarMes(1)">
                <i class="bi bi-chevron-right"></i>
              </button>
            </div>
            <input type="month" #calendarioInput class="d-none" [value]="(mesAtual | date:'yyyy-MM')"
              (change)="selecionarMesDoCalendario($event)">
          </div>
        </div>
      </div>

      <!-- Sidebar: Ações Rápidas -->
      <div class="sidebar-section">
        <div class="card card-custom fade-in-up" style="animation-delay: 0.3s;">
          <div class="card-body">
            <h5 class="mb-3">
              <i class="bi bi-gem me-2" style="color: var(--dourado-prosperidade);"></i>
              Ações Rápidas
            </h5>

            <div class="d-grid gap-2">
              <button class="btn btn-investment-custom" (click)="abrirModalInvestimento()">
                <i class="bi bi-plus-circle"></i>
                Novo Investimento
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista de Investimentos -->
      <ul class="list-group mb-4">
        <li *ngFor="let investimento of investimentos"
          class="list-group-item d-flex justify-content-between align-items-center py-3 border-0 shadow-sm mb-2 rounded-3"
          style="transition: all 0.2s;">
          <div class="d-flex flex-column">
            <span class="fw-semibold" style="color: var(--escuro-sofisticado);">
              {{ investimento.nome}}
            </span>
          </div>
          <div class="d-flex align-items-center gap-2">
            <span class="badge px-3 py-2 fw-bold" style="background: rgba(40, 167, 69, 0.15); color: var(--purple);">
              R$ {{ investimento.valorAtual | number:'1.2-2' }}
            </span>
            <button class="btn btn-sm btn-outline-primary me-1" (click)="abrirModalEditar(investimento)">
              <i class="bi bi-pencil"></i>
            </button>
            <button class="btn btn-sm btn-outline-danger" (click)="deletarInvestimento(investimento.id)">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </li>
      </ul>

      <!-- ==================== MODAL ==================== -->
      <div class="modal fade" id="modalInvestimento" tabindex="-1" aria-labelledby="modalInvestimentoLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalInvestimentoLabel">Novo Investimento</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="row g-3">
                  <div class="col-12">
                    <label class="form-label">Nome</label>
                    <input type="text" class="form-control" [(ngModel)]="novoInvestimento.nome" name="nome" required />
                  </div>
                  <div class="col-12">
                    <label class="form-label">Descrição</label>
                    <input type="text" class="form-control" [(ngModel)]="novoInvestimento.descricao" name="descricao"
                      required />
                  </div>
                  <div class="col-12">
                    <label class="form-label">Tipo</label>
                    <input type="text" class="form-control" [(ngModel)]="novoInvestimento.tipo" name="tipo" required />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Quantidade</label>
                    <input type="number" step="0.01" class="form-control" [(ngModel)]="novoInvestimento.quantidade"
                      name="quantidade" required />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Preço Médio (R$)</label>
                    <input type="number" step="0.01" class="form-control" [(ngModel)]="novoInvestimento.precoMedio"
                      name="precoMedio" required />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Valor (R$)</label>
                    <input type="number" step="0.01" class="form-control" [(ngModel)]="novoInvestimento.valorAtual"
                      name="valor" required />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Data</label>
                    <input type="date" class="form-control" [(ngModel)]="novoInvestimento.dataInvestimento" name="data"
                      required />
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn" style="background-color: var(--blue-dark); color: var(--card-bg);"
                data-bs-dismiss="modal">Cancelar</button>
              <button type="button" class="btn"
                style="background-color: var(--blue-president); color: var(--card-bg); font-weight: 500;"
                (click)="salvarInvestimento()">Salvar Investimento</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>